<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ö–∞—Ä—Ç–æ—á–Ω–∞—è –ê—Ä–µ–Ω–∞</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Lilita One', sans-serif;
      background: linear-gradient(180deg, #3b83f6 0%, #1c4bbd 100%);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      height: 100vh;
      overflow: hidden;
      user-select: none;
    }

    .top-bar {
      width: 100%;
      display: flex;
      justify-content: space-around;
      align-items: center;
      background: rgba(0, 0, 0, 0.3);
      padding: 10px;
      font-size: 14px;
      animation: fadeInDown 1s ease forwards;
    }

    .top-bar div {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .arena {
      width: 90%;
      height: 50%;
      background: linear-gradient(180deg, #4caf50 0%, #2e7d32 100%);
      border: 4px solid #fff;
      border-radius: 20px;
      box-shadow: 0 0 20px rgba(0,0,0,0.4) inset;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      transform: scale(0.7);
      opacity: 0;
      animation: zoomIn 1s ease 0.5s forwards;
    }

    .arena::before, .arena::after {
      content: '';
      position: absolute;
      width: 20%;
      height: 30%;
      background: #795548;
      border: 3px solid #fff;
      border-radius: 10px;
      bottom: 10px;
    }
    .arena::after {
      top: 10px;
      bottom: auto;
      right: 10%;
    }

    .bottom-menu {
      display: flex;
      justify-content: space-around;
      width: 100%;
      background: rgba(0,0,0,0.25);
      padding: 10px 0;
      border-top: 2px solid rgba(255,255,255,0.3);
      animation: fadeInUp 1s ease 1s forwards;
      opacity: 0;
    }

    .menu-btn {
      background: linear-gradient(180deg, #ffd54f 0%, #f9a825 100%);
      border: 3px solid #fff;
      border-radius: 12px;
      color: #000;
      font-size: 14px;
      font-weight: bold;
      padding: 8px 16px;
      box-shadow: 0 4px #b9770e;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .menu-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 6px #b9770e;
    }

    .menu-btn:active {
      transform: translateY(2px) scale(0.97);
      box-shadow: 0 2px #b9770e;
    }

    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes zoomIn {
      from { transform: scale(0.7); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    @keyframes flashGold {
      0% { color: #fff; }
      50% { color: #ffeb3b; transform: scale(1.2); }
      100% { color: #fff; transform: scale(1); }
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Lilita+One&display=swap" rel="stylesheet">
</head>
<body>
  <div class="top-bar">
    <div>üëë <span id="playerName">–ò–≥—Ä–æ–∫</span></div>
    <div>üèÜ <span id="trophies">1200</span></div>
    <div>üí∞ <span id="gold">100</span></div>
  </div>

  <div class="arena">
    <h2>–ê–†–ï–ù–ê</h2>
  </div>

  <div class="bottom-menu">
    <button id="battleBtn" class="menu-btn">‚öîÔ∏è –ë–æ–π</button>
    <button class="menu-btn">üÉè –ö–æ–ª–æ–¥–∞</button>
    <button class="menu-btn">üè∞ –ö–ª–∞–Ω</button>
    <button class="menu-btn">üíé –ú–∞–≥–∞–∑–∏–Ω</button>
  </div>

  <script>
    const tg = window.Telegram?.WebApp;
    let username = '–ò–≥—Ä–æ–∫';

    if (tg) {
      tg.expand();
      const user = tg.initDataUnsafe?.user;
      if (user) {
        username = user.username ? `@${user.username}` : user.first_name;
        document.getElementById('playerName').textContent = username;
      }
    } else {
      document.querySelector('.arena').innerHTML = '<h3>–ó–∞–ø—É—Å–∫ –≤–æ–∑–º–æ–∂–µ–Ω —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ Telegram</h3>';
    }

    // –ó–∞–≥—Ä—É–∑–∫–∞ –±–∞–ª–∞–Ω—Å–∞
    let gold = parseInt(localStorage.getItem('gold') || '100');
    document.getElementById('gold').textContent = gold;

    const goldElement = document.getElementById('gold');

    function updateGold(change) {
      gold += change;
      if (gold < 0) gold = 0;
      localStorage.setItem('gold', gold);
      goldElement.textContent = gold;
      goldElement.style.animation = 'flashGold 0.5s';
      setTimeout(() => goldElement.style.animation = '', 500);
    }

    // –õ–æ–≥–∏–∫–∞ –±–æ—è
    const battleBtn = document.getElementById('battleBtn');
    battleBtn.addEventListener('click', () => {
      const result = Math.random() < 0.5 ? 'win' : 'lose';
      if (result === 'win') {
        updateGold(50);
        alert('üèÜ –ü–æ–±–µ–¥–∞! +50 –∑–æ–ª–æ—Ç–∞');
      } else {
        updateGold(-20);
        alert('üòû –ü–æ—Ä–∞–∂–µ–Ω–∏–µ! -20 –∑–æ–ª–æ—Ç–∞');
      }
    });
  </script>
</body>
</html>
